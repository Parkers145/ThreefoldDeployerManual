<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Deploying an Example Configuration with Terraform on Windows Using Putty In 7 Steps (quickstart)</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../index.html">Threefold Deployer Manual</a></li><li class="chapter-item expanded affix "><li class="part-title">How to use the Playground to Create Deployments</li><li class="chapter-item expanded "><a href="../playground/setupthreefoldconnect.html"><strong aria-hidden="true">1.</strong> Set-up Your Playground</a></li><li class="chapter-item expanded "><a href="../playground/deploy.html"><strong aria-hidden="true">2.</strong> Deploy Your First Workload</a></li><li class="chapter-item expanded "><a href="../playground/support.html"><strong aria-hidden="true">3.</strong> Get Support</a></li><li class="chapter-item expanded affix "><li class="part-title">How To Use Your Deployments</li><li class="chapter-item expanded "><a href="../playground/setupubuntu.html"><strong aria-hidden="true">4.</strong> Setting up an Ubuntu VM</a></li><li class="chapter-item expanded "><a href="../playground/accessubuntu.html"><strong aria-hidden="true">5.</strong> Accessing Your Ubuntu VM</a></li><li class="chapter-item expanded "><a href="../flist/createfullvmflist.html"><strong aria-hidden="true">6.</strong> Create a Custom Ubuntu Full VM Image</a></li><li class="chapter-item expanded "><a href="../playground/ubuntunet.html"><strong aria-hidden="true">7.</strong> Your Cloud Ubuntu VM's Network Interfaces</a></li><li class="chapter-item expanded affix "><li class="part-title">How to use Terraform to Create Deployments</li><li class="chapter-item expanded "><a href="../terraform/setuptfcterraform.html"><strong aria-hidden="true">8.</strong> Setup Your Wallets and Accounts for Use With Terraform</a></li><li class="chapter-item expanded "><a href="../terraform/gettingstarted.html"><strong aria-hidden="true">9.</strong> Installing and Deploying With Terraform(detailed overview)</a></li><li class="chapter-item expanded "><a href="../terraform/7stepslinux.html"><strong aria-hidden="true">10.</strong> How To Deploy A Terraform Example Configuration on the Threefold Grid from Linux in 7 steps (quickstart)</a></li><li class="chapter-item expanded "><a href="../terraform/7stepswindows.html" class="active"><strong aria-hidden="true">11.</strong> Deploying an Example Configuration with Terraform on Windows Using Putty In 7 Steps (quickstart)</a></li><li class="chapter-item expanded "><a href="../terraform/singlevmmaintf.html"><strong aria-hidden="true">12.</strong> Detailed Single Full VM Main.tf Explanation</a></li><li class="chapter-item expanded "><a href="../terraform/multivmmaintf.html"><strong aria-hidden="true">13.</strong> Detailed Multi Full VM Main.tf Explanation</a></li><li class="chapter-item expanded affix "><li class="part-title">How to Install Specific Applications in a Ubuntu VM on The Threefold Grid</li><li class="chapter-item expanded "><a href="../applicationhowto/manualmastodon.html"><strong aria-hidden="true">14.</strong> Deploy Mastadon in A Full VM</a></li><li class="chapter-item expanded "><a href="../applicationhowto/manualpeertube.html"><strong aria-hidden="true">15.</strong> Deploy Peertube in A Full VM</a></li><li class="chapter-item expanded "><a href="../applicationhowto/manualfunkwhale.html"><strong aria-hidden="true">16.</strong> Deploy Funkwhale in A Full VM</a></li><li class="chapter-item expanded "><a href="../applicationhowto/manualiredmail.html"><strong aria-hidden="true">17.</strong> Host Smtp Services in A Full VM</a></li><li class="chapter-item expanded "><a href="../applicationhowto/desktopchromerdp.html"><strong aria-hidden="true">18.</strong> Linux Desktop VM with Chrome RDP</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="deploying-an-example-configuration-with-terraform-on-windows-using-putty-in-7-steps"><a class="header" href="#deploying-an-example-configuration-with-terraform-on-windows-using-putty-in-7-steps">Deploying an Example Configuration with Terraform on Windows Using Putty In 7 Steps</a></h1>
<p>In this tutorial, you will learn how to install Terraform, create a configuration file, and use Terraform to deploy infrastructure on the Threefold Grid from a Windows computer. By the end of this tutorial, you will have deployed a network and two virtual machines (VMs) on the Threefold Grid. </p>
<p><strong>Prerequisites</strong> </p>
<p>Before you begin, you will need the following: </p>
<p>A Windows computer with the following software installed: </p>
<ul>
<li>
<p><a href="https://gitforwindows.org/">Git for Windows</a> </p>
</li>
<li>
<p><a href="https://developer.hashicorp.com/terraform/downloads">Terraform for Windows</a></p>
</li>
</ul>
<p>You will Also Need,</p>
<ul>
<li>
<p>A Threefold Grid mnemonic phrase. This is used to generate the seed for your node. You can get a mnemonic phrase by creating a Threefold Grid account. </p>
</li>
<li>
<p>An SSH key. This will be used to securely connect to the VMs you create. If you don't already have an SSH key, you can generate one using the ssh-keygen command in Git for Windows. </p>
</li>
</ul>
<p>Once you have all of this you can Get started </p>
<details>
    <summary><b>Step 1: Create a Configuration Directory</b></summary>
<p>Create a new directory where you want to store your Terraform configuration. This directory can be named anything you like. In this tutorial, we will create a deployments directory and a testdeployment subdirectory inside of it. </p>
<p>From the Git for Windows command prompt: </p>
<pre><code>mkdir deployments 
mkdir deployments\testdeployment 
</code></pre>
</details>
<details>
    <summary><b>Step 2: Create the main.tf File</b></summary> 
<p>Copy the contents of the provided main.tf file and write it to the testdeployment directory you just created. </p>
<pre><code>notepad main.tf 
# paste the contents of the main tf then save and close the file 
</code></pre>
<details>
        <summary><b>If the example you are deploying does not use `variable blocks` (i.e. most not created by me)  you will have to add them</b></summary>
<pre><code>     ```
     # ADD THE THREE VARIABLES ABOVE THE EXSITING LINES IN THE main.tf your are deploying 
     variable &quot;MNEMONICS&quot; {
     type        = string
     description = &quot;The mnemonic phrase used to generate the seed for the node.&quot;
      }

     variable &quot;NETWORK&quot; {
     type        = string
     default     = &quot;main&quot;
     description = &quot;The network to connect the node to.&quot;
     }

     variable &quot;SSH_KEY&quot; {
     type = string
     }




      # CHANGE THESE SECTIONS OF THE main.tf to use the variables 

      provider &quot;grid&quot; {
      mnemonics = &quot;${var.MNEMONICS}&quot;
      network   = &quot;${var.NETWORK}&quot;  
       }
      and 
      env_vars = { 
                  SSH_KEY = &quot;${var.SSH_KEY}&quot; 
      } variable &quot;MNEMONICS&quot; {


     } 
     ```
</code></pre>
</details>
</details>
<details>
    <summary><b>Step 3: Initialize the Directory as a Terraform Configuration Directory</b></summary>
<p>From the Git for Windows command prompt, navigate to the testdeployment directory where you placed the main.tf file. </p>
<pre><code>cd deployments\testdeployment 
</code></pre>
<p>Run the following command to initialize the directory as a Terraform configuration directory and install the required provider(s): </p>
<pre><code>terraform init 
</code></pre>
</details>
<details>
    <summary><b>Step 4: Create the Infrastructure Resources</b></summary>
<p>To apply the changes specified in the configuration and create the resources defined in main.tf, you will need to provide values for the variables in your configuration. You can do this by creating a .tfvars file and specifying the values you want to use. </p>
<p>For example, you might create a file called env1.tfvars and include the following contents: </p>
<pre><code>MNEMONICS = &quot;your mnemonic phrase here&quot; 
NETWORK = &quot;main&quot;  
SSH_KEY = &quot;your ssh key here&quot; 
</code></pre>
<p>To use this file, pass the -var-file flag to the terraform apply command, followed by the path to the file: </p>
<pre><code>terraform apply -parallelism=1 -auto-approve -var-file=&quot;deployments\yourfile.tfvar&quot; 
</code></pre>
</details>
<details>
    <summary><b>Step 5: View the Output Values</b></summary>
<p>After the resources have been created, you can view the output values by running the following command: </p>
<pre><code>terraform output 
</code></pre>
<p>This will display the values of the output variables defined in the main.tf file. In this example, the output values include the WireGuard configuration for the network, and the IP addresses of the VMs. </p>
</details>
<details>
    <summary><b>Step 6: Test Your Deployment</b></summary>
<p>To test your deployment, you will need to use an SSH client to connect to the VMs. We recommend using PuTTY with agent forwarding and your SSH key. </p>
<ul>
<li>
<p>Download and install <a href="https://www.putty.org/">PuTTY</a>. </p>
</li>
<li>
<p>Open PuTTY and enter the IP address of the VM you want to connect to in the &quot;Host Name&quot; field. </p>
</li>
<li>
<p>Under &quot;Connection&quot;, expand &quot;SSH&quot;, expand &quot;Auth&quot;, Select &quot;Credentials&quot; </p>
</li>
<li>
<p>Click the &quot;Browse&quot; button next to &quot;Private key file for authentication&quot; and select the path to your SSH key. </p>
</li>
<li>
<p>Click the &quot;Open&quot; button to open the connection to the VM. </p>
</li>
</ul>
<p>When prompted, enter your username (ubuntu) and press Enter. </p>
</details>
<details>
    <summary><b>Step 7: Clean Up Your Deployment</b></summary>
<p>When you're finished testing your deployment, you can clean up the resources you created by running the following command: </p>
<pre><code>terraform destroy -parallelism=1 -auto-approve -var-file=&quot;deployments\yourfile.tfvar&quot; 
</code></pre>
</details>
<h1 id="conclusion"><a class="header" href="#conclusion">Conclusion</a></h1>
<p>In this tutorial, you learned how to install Terraform, create a configuration file, and use Terraform to deploy infrastructure on the Threefold Grid from a Windows computer. You also learned how to use .tfvars files to provide values for the variables in your configuration, and how to view the output values of your deployment and clean up your resources when you're finished. </p>
<p>I hope this tutorial was helpful! If you have any questions or need further assistance, please don't hesitate to ask. I'm happy to help you get started with Terraform and deploying your infrastructure on the Threefold Grid. </p>
<p>I invite you to join us in building on the Threefold Grid in 2023! </p>
<h1 id="resources"><a class="header" href="#resources">Resources</a></h1>
<details>
    <summary><b>Example Main.tf</b></summary> 
<pre><code>variable &quot;MNEMONICS&quot; {
  type        = string
  description = &quot;The mnemonic phrase used to generate the seed for the node.&quot;
}

variable &quot;NETWORK&quot; {
  type        = string
  default     = &quot;main&quot;
  description = &quot;The network to connect the node to.&quot;
}

variable &quot;SSH_KEY&quot; {
  type = string
}


terraform {
  required_providers {
    grid = {
      source = &quot;threefoldtech/grid&quot;
    }
  }
}

provider &quot;grid&quot; {
    mnemonics = &quot;${var.MNEMONICS}&quot;
    network = &quot;${var.NETWORK}&quot;  
}

resource &quot;grid_network&quot; &quot;net1&quot; {
    nodes = [311, 312]
    ip_range = &quot;10.32.0.0/16&quot;
    name = &quot;internal&quot;
    description = &quot;Internal subnet&quot;
    add_wg_access = true
}
resource &quot;grid_deployment&quot; &quot;d1&quot; {
  node = 311
  network_name = grid_network.net1.name
  disks {
    name = &quot;data&quot;
    size = 25
  }
    vms {
    name = &quot;vm1&quot;
    description =&quot;Test vm 1&quot;
    flist = &quot;https://hub.grid.tf/tf-official-vms/ubuntu-22.04-lts.flist&quot;
    cpu = 4
    publicip = true
    publicip6 = true
    memory = 8192
    mounts {
        disk_name = &quot;data&quot;
        mount_point = &quot;/data&quot;
    }
    planetary = true
    env_vars = {
      SSH_KEY = &quot;${var.SSH_KEY}&quot;
    }
  }
}
resource &quot;grid_deployment&quot; &quot;d2&quot; {
  node = 312
  network_name = grid_network.net1.name
  disks {
    name = &quot;data&quot;
    size = 25
  }
    vms {
    name = &quot;vm2&quot;
    description =&quot;Test vm 2&quot;
    flist = &quot;https://hub.grid.tf/tf-official-vms/ubuntu-22.04-lts.flist&quot;
    cpu = 4
    publicip = true
    publicip6 = true
    memory = 8192
    mounts {
        disk_name = &quot;data&quot;
        mount_point = &quot;/data&quot;
    }
    planetary = true
    env_vars = {
      SSH_KEY = &quot;${var.SSH_KEY}&quot;
    }
  }
}
output &quot;wg_config&quot; {
value = grid_network.net1.access_wg_config
}
output &quot;node1_vm1_ip&quot; {
value = grid_deployment.d1.vms[0].ip
}
output &quot;public_ip&quot; {
value = grid_deployment.d1.vms[0].computedip
}
output &quot;public_ip6&quot; {
value = grid_deployment.d1.vms[0].computedip6
}
output &quot;ygg_ip&quot; {
value = grid_deployment.d1.vms[0].ygg_ip
}
</code></pre>
</details>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../terraform/7stepslinux.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../terraform/singlevmmaintf.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../terraform/7stepslinux.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../terraform/singlevmmaintf.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
